# LED config for D600Pro3

[state_led led]
red_pin: motion:PD8
green_pin: motion:PC4
blue_pin: motion:PC5
initial_RED: 0.0
initial_GREEN: 0.0
initial_BLUE: 0.0
idle:     0.0, 0.0, 1.0
printing: 0.0, 1.0, 0.0
paused:   1.0, 1.0, 1.0
error:    1.0, 0.0, 0.0
heating:  0.0, 1.0, 0.0

[multi_pin light_led]
pins: PB13, PB14

[delayed_gcode INIT_LIGHT]
initial_duration:0.01
gcode:
  {% set svv = printer.save_variables.variables %}
  {% set luminance = svv.interior_lighting|default(0)|float %}
  SET_LED LED=Interior_lighting WHITE={luminance} TRANSMIT=1 SYNC=0

[led Interior_lighting]
white_pin: multi_pin:light_led
cycle_time: 0.010
initial_WHITE: 0

[gcode_macro SET_LED]
rename_existing: LED_SET
gcode:
  {% set led_name = params.LED %}
  {% set red = params.RED|default(0)|float %}
  {% set green = params.GREEN|default(0)|float %}
  {% set blue = params.BLUE|default(0)|float %}
  {% set white = params.WHITE|default(0)|float %}
  {% set index = params.INDEX|default(0)|float %}
  {% set transmit = params.TRANSMIT|default(0)|int %}
  {% set sync = params.SYNC|default(0)|int %}

  {% if led_name == "Interior_lighting" %}
      {% if white != 0 %}
         {% set white = 1 %}
      {% endif %}
      SAVE_VARIABLE VARIABLE=interior_lighting VALUE={white}
  {% endif %}
  {% if index == 0 %}
    LED_SET LED={led_name} RED={red} GREEN={green} BLUE={blue} WHITE={white} TRANSMIT={transmit} SYNC={sync}
  {% else %}
    LED_SET LED={led_name} RED={red} GREEN={green} BLUE={blue} WHITE={white} INDEX={index} TRANSMIT={transmit} SYNC={sync}
  {% endif %}
